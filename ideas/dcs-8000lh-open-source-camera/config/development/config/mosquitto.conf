# Mosquitto MQTT Broker Configuration
# This configuration enables MQTT communication between Frigate, Home Assistant, and other services

# General settings
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_type information

# Network settings
listener 1883
allow_anonymous false

# Authentication
password_file /mosquitto/config/passwd

# WebSocket support
listener 9001
protocol websockets
allow_anonymous false

# SSL/TLS settings (optional)
# listener 8883
# cafile /mosquitto/config/ca.crt
# certfile /mosquitto/config/server.crt
# keyfile /mosquitto/config/server.key
# require_certificate true

# Client settings
max_connections 100
max_inflight_messages 20
max_queued_messages 100

# Message settings
message_size_limit 0
retained_persistence true

# Logging
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S

# Security
allow_zero_length_clientid true
auto_id_prefix frigate-
